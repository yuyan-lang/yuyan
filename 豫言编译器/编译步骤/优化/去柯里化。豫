寻观标准库之书。

寻观豫言编译器之编译数据之抽象绑定树结构之抽象语法树之总集之书。



寻观豫言编译器之编译步骤之求值正则变换之无类型正则变换之书。
寻观豫言编译器之编译步骤之求值正则变换之重新正则变换之书。

寻观优化统计信息之书。
寻观优化框架之书。

取得元组变量并继续乃化字符串列「：待取得的自由变量：」而
                化整数「：下个即将取得的自由变量：」而
                化表达式「：元组所在的表达式，必须是自由变量：」而
                化表达式「：取得所有元素的后续式子：」而
                表达式也。
取得元组变量并继续者循取得元组变量并继续以会已有变量们而会当前序数而会元组而会后续式而
    若（长度于已有变量们）等于当前序数
    则后续式
    否则（
        式节点于「内联虑」于（式节点于（元组解构节点于当前序数）于【元组】）衔
            （进行抽象于（第N个于当前序数于（已有变量们））于
                （取得元组变量并继续于已有变量们于（当前序数加一）于元组于后续式））衔【】
    ）也。

拉姆达抽象去柯里化乃化字符串列「：已经积累的连续拉姆达抽象的前序参数：」而
                 化表达式「：当前拉姆达函数体：」而
                 化（化表达式而表达式）「：对于原先的函数体变换：」而
                 或可有（表达式「：优化过的lambda式：」合（化字符串而表达式）「：Lambda式的原式：」）「：最终的返回式，是一个大的虑，如果已经优化，则返回可无：」也。
拉姆达抽象去柯里化者循拉姆达抽象去柯里化以会已有积累而会式而会原先变换而
    鉴式而
    「：f = \x. \y. M 的 求值正则（ANF）形式是 
        f = \x. (let f1 = \y. M in 
                let r1 = f1 x in 
                r1)
    ：」
        有（式节点于（拉姆达抽象于「拉形」）于「拉体」衔【】）则
            （
                虑函数参数抽象名及参后体者解构抽象于「拉体」而
                虑参后体者函数参数抽象名及参后体中一而
                虑函数参数抽象名者函数参数抽象名及参后体中零而
                虑结束去柯里者
                    （化有而（或可有（表达式合（化字符串而表达式）））也（会无而
                        若（长度于已有积累）等于零
                        则（
                            「：是一个普通的拉姆达抽象，不优化直接返回：」
                            可无
                        ）
                        否则（
                            虑所有参数者已有积累接【函数参数抽象名及参后体中零】而
                            「：收集包括本参数的所有参数，把拉体单独构建参数，返回变换后的式子：」
                            虑新函数体者（式节点于（拉姆达抽象于显式）于【（构造抽象于『新元组』于（
                                会新元组名而
                                    「：先取得所有变量，然后调用参后体：」
                                取得元组变量并继续于所有参数于零于（自由变量于新元组名）于参后体
                            ））】）而
                            （可有（「新函数体」与
                                （（化字符串而表达式也会新函数名而
                                        虑原先函数体者
                                            （求值正则变换于（原先变换于（式节点于（拉姆达抽象于显式）于【（进行抽象于（函数参数抽象名及参后体中零）于（
                                                    式节点于（函数调用于显式）于【
                                                        自由变量于新函数名，
                                                        （式节点于元组构造节点于（态射于自由变量于所有参数））】
                                                ））】））于（会名而自由变量于名））而
                                        原先函数体
                                        「： 「内联虑重新正则变换」于「原先函数体」于（后续绑定） ：」
                                        「： （式节点于「内联虑」于【「原先函数体」，后续绑定】） ：」
                                            
                                ））））
                        ））
                    ）而
                鉴参后体而
                    有（式节点于「内联虑」于（式节点于（拉姆达抽象于「内拉形」）于「内拉体」衔【】）衔「拉后式」衔【】）则
                        （
                            虑函数抽象名及拉后体者解构抽象于「拉后式」而
                            虑函数抽象名者函数抽象名及拉后体中零而
                            虑拉后体者「函数抽象名及拉后体」中一而
                            鉴拉后体而
                                有（自由变量于「结果名」）则
                                    （若（「串相等」于「结果名」于（函数抽象名））
                                        则（
                                            拉姆达抽象去柯里化
                                                于（已有积累接【（函数参数抽象名及参后体中零）】）
                                                于（式节点于（拉姆达抽象于「内拉形」）于「内拉体」衔【】）
                                                于（会后式而
                                                    「： 虑无者（打印行于『正在原先变换：』附（表达式表示于后式））而 ：」
                                                    原先变换于（式节点于（「拉姆达抽象」于拉形）于【进行抽象于函数参数抽象名于后式】））
                                        ）
                                        否则（
                                            结束去柯里于元
                                        ）
                                    ）
                                或有「其他」则（
                                    结束去柯里于元
                                ）
                        ）
                    「：我们要排除重复的情况，：」
                    或有（式节点于「内联虑」于（式节点于（元组构造节点）于「元参」）
                                        衔「元造后式」
                                        衔【】）则
                        （
                            若（（长度于元参）等于（（长度于已有积累）加一））
                            则（
                                鉴（解构抽象于「元造后式」）中一而
                                    有（（式节点于「内联虑」于（式节点于（函数调用于「函形」）于（自由变量于函）衔（自由变量于参）衔【】）
                                            衔「调用后式」
                                            衔【】））则
                                        （
                                            鉴（解构抽象于「调用后式」）中一而
                                                有（自由变量于「返回名」）则
                                                    （
                                                        可无
                                                    ）
                                                或有「其他」则
                                                    （
                                                        结束去柯里于元
                                                    ）
                                        ）
                                    或有「其他」则
                                        （
                                            结束去柯里于元
                                        ）
                            ）否则（
                                结束去柯里于元
                            ）
                        ）
                    或有「其他」则
                        （
                            结束去柯里于元
                        ）
            ）
        或有「其他」则
            （
                发生事故于『去38，其他拉姆达表达式』附（表达式表示于式）
            ）
        也。


处理单函数递归乃化字符串「：递归名：」而
             化字符串「：递归结构投影名：」而
             化表达式「：必须是一个函数，函数会引用递归名，并投影出递归投影：」
             而表达式「：处理后的函数：」也。
处理单函数递归者循处理单函数递归以会递归名而会投影名而会递归后式而
    鉴递归后式而
        有（式节点于（拉姆达抽象于「拉形」）于「拉参」衔【】）则
            （虑
            「
                内联所有变量乃化字符串列「：所有的递归变量：」而化表达式而表达式也。
                内联所有变量者循内联所有变量以会递归名称们而会式而
                    鉴式而
                        有（式节点于「内联虑」于（式节点于（递归变量节点）于
                                                （自由变量于「可能递归名称」）衔【】
                                                ）衔「递归变量后体」衔【】）则
                            （
                                若（「串相等」于「可能递归名称」于「递归名」）
                                则（
                                    虑抽象名及后递归者解构抽象于「递归变量后体」而
                                    虑抽象名者抽象名及后递归中零而
                                    虑后递归者「抽象名及后递归」中一而
                                    内联所有变量于（递归名称们接【抽象名】）于后递归
                                ）否则
                                （
                                    （不带定义优化过程于（内联所有变量于递归名称们）于式）
                                ）
                            ）            
                        或有（式节点于「内联虑」于（
                            
                            （式节点于（元组解构节点于零）于（式节点于（自由变量标注节点于「可能投影名」）于（自由变量于「可能递归名称」）衔【】）衔【】）
                            「： 式节点于（结构投影带序数于「可能投影名」于零）于
                                                （自由变量于「可能递归名称」）衔【】 ：」
                                                ）衔「递归变量后体」衔【】）则
                            （
                                若（（「串相等」于「可能投影名」于「投影名」）
                                    且（「存在吗」于（「串相等」于「可能递归名称」）于递归名称们））
                                则（
                                    式节点于「内联虑」于（式节点于递归变量节点于（自由变量于「递归名」）衔【】）
                                                   衔（抽象表达式操作于「递归变量后体」于（内联所有变量于递归名称们））
                                                   衔【】
                                ）否则
                                （
                                    （不带定义优化过程于（内联所有变量于递归名称们）于式）
                                ）
                            ）            
                        或有「其他」则（
                                    （不带定义优化过程于（内联所有变量于递归名称们）于式）
                        ）
                        也。
                
                式节点于（拉姆达抽象于「拉形」）于（抽象表达式操作于拉参于（内联所有变量于【】））衔【】
            」）
        或有「其他」则（发生事故于『格式不对』）
也。

移除递归乃化字符串「：所有的递归变量：」而化表达式而表达式也。
移除递归者循移除递归以会递归名而会式而
    鉴式而
        有（式节点于「内联虑」于（式节点于（递归变量节点）于
                                （自由变量于「可能递归名称」）衔【】
                                ）衔「递归变量后体」衔【】）则
            （
                若（「串相等」于「可能递归名称」于「递归名」）
                则（
                    式节点于「内联虑」于（自由变量于「递归名」）
                    衔（抽象表达式操作于「递归变量后体」于（移除递归于递归名））衔
                    【】
                ）否则
                （
                    （不带定义优化过程于（移除递归于递归名）于式）
                ）
            ）            
        或有「其他」则（
                    （不带定义优化过程于（移除递归于递归名）于式）
        ）
        也。
    


「：去柯里化将 f= \x. \y. M 转换成 f' = \(x,y).M, f = \x. \y. f (x,y)
，同时将单结构递归转换成函数递归：」
「：在随后的函数内联中f将会被内联：」
去柯里化乃化表达式而表达式也。
去柯里化者循去柯里化以会式而
    鉴式而
        有（式节点于「内联虑」于「实现」衔「下个」衔【】）则
            （
                鉴「实现」而
                    有（式节点于（拉姆达抽象于「拉形」）于「拉体」衔【】）则
                        （
                            虑后下个者抽象表达式操作于下个于「去柯里化」而
                            鉴（拉姆达抽象去柯里化于【】于实现于（会后式而后式））而
                                有（可有（「变换后式」与「后函数式」））则（
                                        记录优化于元；
                                        式节点于「内联虑」于变换后式衔
                                            （构造抽象于『新函数名』于（会新函数名而
                                                「内联虑重新正则变换」于（后函数式于新函数名）于后下个
                                            ））衔【】
                                    ）
                                或有「可无」则（式节点于「内联虑」于【实现，后下个】）
                        ）
                    或有「其他」则
                        （不带定义优化过程于去柯里化于式）
            ）
        或有（式节点于「递归内联虑无类型」于「实现」衔「下个」衔【】）则
            （
                「：检查如果是一个正则结构的递归节点，就Eta展开所有的定义式
                目前只实现单个定义：」
                虑递归抽象名及递归体者解构抽象于「实现」而
                虑递归抽象名者递归抽象名及递归体中零而
                虑递归体者「递归抽象名及递归体」中一而
                鉴「递归体」而
                    有（式节点于「内联虑」于（式节点于（拉姆达抽象于「内拉形」）于「内拉体」衔【】）衔「拉后式」衔【】）则
                            （
                                虑函数抽象名及拉后体者解构抽象于「拉后式」而
                                虑函数抽象名者函数抽象名及拉后体中零而
                                虑拉后体者「函数抽象名及拉后体」中一而
                                鉴拉后体而
                                    有（式节点于「内联虑」于（式节点于（正则结构结尾节点无类型）于（
                                        （式节点于（自由变量标注节点于「投名」）于（自由变量于「参数名」）衔【】）
                                    ）衔【】）衔「结后式」衔【】）则
                                    （
                                        （若（「串相等」于「参数名」于（函数抽象名））
                                            则（
                                                虑结构抽象名及结后体者解构抽象于「结后式」而
                                                虑结构抽象名者结构抽象名及结后体中零而
                                                虑结后体者「结构抽象名及结后体」中一而
                                                    鉴结后体而
                                                        有（自由变量于「最终返回名」）则
                                                            （若（「串相等」于「最终返回名」于（结构抽象名））
                                                                则（
                                                                    虑函数后续者（构造抽象于『变换后函数式』于
                                                                        （会变换后函数式而
                                                                            式节点于「内联虑」于
                                                                                【
                                                                                    （式节点
                                                                                        于（正则结构结尾节点无类型）
                                                                                        于【（式节点于（自由变量标注节点于投名）于【（自由变量于「变换后函数式」）】）】）
                                                                                ，抽象表达式操作于下个于「去柯里化」】

                                                                        ））而
                                                                    虑可能平式者
                                                                        「拉姆达抽象去柯里化」
                                                                            于（【】）
                                                                            于（式节点于（拉姆达抽象于「内拉形」）于「内拉体」衔【】）
                                                                            于（会后式而后式）
                                                                            而
                                                                    虑统一待处理式者
                                                                        （
                                                                            鉴「可能平式」而
                                                                                有「可无」则（
                                                                                    式节点于「递归内联虑无类型」于【
                                                                                        进行抽象于（递归抽象名）于（
                                                                                            「简单重新内联」于
                                                                                            （
                                                                                                处理单函数递归
                                                                                                    于递归抽象名
                                                                                                    于投名
                                                                                                    于（式节点于（拉姆达抽象于「内拉形」）于「内拉体」衔【】））
                                                                                            ）
                                                                                        ，函数后续】
                                                                                ）
                                                                                或有（可有（「变换后函数」与「后函数式」））则（
                                                                                    鉴变换后函数而
                                                                                        有（式节点于（拉姆达抽象于「后拉形」）于「变换后拉参」衔【】）则
                                                                                            式节点于「递归内联虑无类型」于【
                                                                                                构造抽象于『去科里化新递归名』于（会新递归名而
                                                                                                    「简单重新内联」于
                                                                                                    （
                                                                                                        式节点于（拉姆达抽象于「后拉形」）于【
                                                                                                        抽象表达式操作于「变换后拉参」于（会拉体而
                                                                                                                    式节点于「内联虑」于【
                                                                                                                        式节点于递归变量节点于【（自由变量于新递归名）】，「：不可以在顶层展开，TODO：修改：」
                                                                                                                        构造抽象于『递归递归名』于（会递归递归名而
                                                                                                                            「内联虑重新正则变换」
                                                                                                                                于（「后函数式」于递归递归名）
                                                                                                                                于（构造抽象于『变换后原函数』于（会变换后原函数而
                                                                                                                                    式节点于「内联虑」于【
                                                                                                                                        （式节点
                                                                                                                                            于（正则结构结尾节点无类型）
                                                                                                                                            于【（式节点于（自由变量标注节点于投名）于【（自由变量于「变换后原函数」）】）】）
                                                                                                                                        ，进行抽象于递归抽象名于（（移除递归于递归抽象名于「拉体」））】
                                                                                                                                ））
                                                                                                                        ）】
                                                                                                                ）
                                                                                                        】
                                                                                                    ）
                                                                                                ），
                                                                                            （构造抽象于『新函数名』于（会新函数名而
                                                                                                「内联虑重新正则变换」于（后函数式于新函数名）于函数后续
                                                                                            ））】
                                                                                        或有「其他」则（表达式也发生事故于『期待变换后式是拉姆达抽象』）
                                                                                ）
                                                                        ）而
                                                                        （记录优化于元；
                                                                   统一待处理式
                                                                        ）
                                                                ）
                                                                否则（
                                                                    （不带定义优化过程于去柯里化于式）
                                                                ）
                                                            ）
                                                        或有「其他」则（
                                                            （不带定义优化过程于去柯里化于式）
                                                        ）
                                            ）
                                            否则（
                                                （不带定义优化过程于去柯里化于式）
                                            ）
                                        ）
                                    ）
                                    或有「其他」则（
                                        （不带定义优化过程于去柯里化于式）
                                    ）
                            ）
                    或有「其他」则
                        （不带定义优化过程于去柯里化于式）
            ）
        或有「其他」则（不带定义优化过程于去柯里化于式）也。


去柯里化顶层者去柯里化也。